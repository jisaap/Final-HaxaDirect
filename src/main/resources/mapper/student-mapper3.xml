<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="student3">
	
	<select id="selectTuitionOne" parameterType="string" resultMap="tuitionResult">
		SELECT T.*, S.STU_NAME, D.DEPT_NAME, 
		TO_CHAR(TO_DATE(SUBSTR(S.STU_SSN,1,2), 'RR'), 'RRRR')||'년 '||SUBSTR(S.STU_SSN,3,2)||'월 '||SUBSTR(S.STU_SSN,5,2)||'일' AS BIRTHDAY
		FROM HD_TUITION_TB T JOIN HD_STUDENT_TB S 
		ON T.STU_NO=#{studentNo} AND T.STU_NO=S.STU_NO 
		JOIN HD_DEPARTMENT_TB D
		ON S.DEPT_CODE=D.DEPT_NO
  	</select>
  	
  	
  	<resultMap id="tuitionResult" type="tuition">
		<result column="STU_NO" property="stuNo" />
		<result column="ACA_YEAR_SEM" property="acaYearSem" />
		<result column="TUITION" property="tuition" />
		<result column="PAYMENT_STAT" property="paymentStat" />
		<result column="PAYMENT_DATE" property="paymentDate" />	
		<result column="DUE_DATE" property="dueDate" />	
		<result column="REDUCTION_STAT" property="reductionStat" />
		<result column="STU_NAME" property="stuName" />	
		<result column="DEPT_NAME" property="deptName" />	
		<result column="BIRTHDAY" property="birthday" />		
	</resultMap>

  
</mapper>
